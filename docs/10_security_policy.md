# セキュリティポリシー（勤怠管理SaaS）

## 1. 目的
本書は勤怠管理SaaSにおけるセキュリティ要件および運用ルールを定義する。
対象は Cognito / API Gateway / Lambda / RDS / DynamoDB / S3 を中心とする。

## 2. 認証・認可
### 2.1 認証
- 認証基盤は Amazon Cognito（User Pool）を使用する
- APIアクセスは JWT（ID Token または Access Token）を必須とする
- トークンの有効期限が切れた場合は再ログインまたはリフレッシュを行う

### 2.2 認可
- ロール（EMPLOYEE / MANAGER / ADMIN）によりAPI許可範囲を制御する
- MANAGERは「配下メンバー」のみ承認対象とする
- ADMIN権限は限定的に付与し、付与/剥奪は監査対象とする

## 3. パスワード・MFA
- Cognitoのパスワードポリシーは強制する（長さ・複雑性）
- 管理者（ADMIN）についてはMFAを必須とする
- ログイン失敗が一定回数を超えた場合はロックする

## 4. ネットワーク/暗号化
- 通信は全てTLSを必須とする
- S3に保存する帳票/ログは暗号化（SSE-S3またはSSE-KMS）を有効化
- DynamoDB/RDSの暗号化はデフォルト設定を有効化する

## 5. 秘匿情報管理
- DBパスワード等の秘匿情報はLambda環境変数に平文で保存しない
- Secrets Manager または SSM Parameter Store（SecureString）を使用する
- GitHubには秘匿情報をコミットしない（.envやキーの除外徹底）

## 6. 監査ログ
以下の操作は必ず監査ログを残す：
- 勤怠データの代理修正
- 休暇残数の管理者修正
- ユーザ権限（role）変更
- 所属部門変更
- 月次締め処理

## 7. インシデント対応
- 重大インシデント（データ漏洩疑い等）はP1として扱う
- 初動としてアクセス遮断・権限剥奪・ログ保全を実施する
- 事後に再発防止策をRunbookへ追記する
