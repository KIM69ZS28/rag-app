# 運用Runbook（共通）

## 1. 目的
本Runbookは勤怠管理SaaSの運用・監視・定期作業・障害対応の共通ルールを定義する。

## 2. 監視対象（CloudWatch）
### 2.1 API Gateway
- 5XXErrorが増加した場合：重大（P1）
- Latencyが急増した場合：調査対象（P2）

### 2.2 Lambda
- Errors > 0 が継続：調査対象
- Durationがtimeoutに近い：性能劣化
- Throttlesが増加：同時実行数制限または負荷増大

### 2.3 RDS(PostgreSQL)
- DatabaseConnectionsが急増：コネクション枯渇疑い
- CPUUtilizationが高止まり：重いクエリやロック疑い
- FreeStorageSpace低下：逼迫

## 3. 定期作業
### 3.1 月次
- 勤怠締め処理実行
- 月次集計レポートの生成とS3保管
- 監査ログの確認（権限変更・代理修正）

### 3.2 週次
- エラー増加の傾向確認（CloudWatch）
- システム変更（デプロイ）履歴の確認

## 4. 障害対応の原則
- 影響範囲を最初に把握（全体か一部か）
- 対応中に実施した作業は必ず記録
- 原因が特定できない場合でも暫定復旧を優先する

## 5. エスカレーション
- 30分以内に復旧見込みが立たない場合は責任者へ連絡
- セキュリティインシデント疑いは即時連絡（優先度P1）
